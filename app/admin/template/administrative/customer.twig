{% extends "base.layout.twig" %}

{% block content %}

{% if action == 'edit' %}
	<ul class="breadcrumb">
		<li><a href="/administrative/customer">{% trans "Customers" %}</a> <span class="divider">/</span></li>
		<li class="active">{% trans "Edit customer" %}</li>
	</ul>
	<div class="page-header">
		<h3>{% trans "Edit customer" %}</h3>
	</div>

	{% if saved %}
	<div class="alert alert-success">
		{% trans "Customer details saved" %}
	</div>
	{% endif %}

	{% set parameters = {
		'customer': customer,
		'countries': countries
	} %}
	{% include 'snippet/form/customer.twig' with parameters %}

{% else %}
	<ul class="breadcrumb">
		<li class="active">{% trans "Customers" %}</li>
	</ul>

	{% set parameters = {
		'countries': countries
	}%}

	<div class="page-header">
		<h3>{% trans "Customers" %}</h3>
		<div class="pull-right pull-up-h3">
			{{ base.modal('Add customer'|trans, 'button', 'icon-plus-sign', 'form/customer', 'Add customer'|trans, parameters) }} 
		</div>
	</div>

	<form class="well form-horizontal" method="post" action="{{ env.server.REQUEST_URI }}" >
		<div class="control-group">
			<label class="control-label" for="search">{% trans "Search" %}</label>
			<div class="controls">
				<div class="input-append">
					<input type="text" name="search" value="{{ pager.get_search() }}"/>
					<button class="btn" type="submit">{% trans "Search" %}</button>
				</div>
			</div>
		</div>
	</form>

	{% for customer in pager.items %}
		{% if loop.first %}
			<table class="table table-striped table-hover table-condensed">
				<thead>
					<tr>
						<th>{% trans "ID" %}</th>
						<th>{% trans "Firstname" %}</th>
						<th>{% trans "Lastname" %}</th>
						<th>{% trans "Email" %}</th>
						<th>{% trans "Company" %}</th>
						<th>&nbsp;</th>
					</tr>
				</thead>
				<tbody>
		{% endif %}

		<tr>
			<td>{{ customer.id }}</td>
			<td>{{ customer.firstname }}</td>
			<td>{{ customer.lastname }}</td>
			<td>{{ customer.email }}</td>
			<td>{{ customer.company }}</td>
			<td>
				<a href="/administrative/customer?action=edit&id={{ customer.id }}">
					<i class="icon-pencil"></i>
				</a>
			</td>
		</tr>

		{% if loop.last %}
				</tbody>
			</table>
			{{ pager.links|raw }}
		{% endif %}
	{% else %}
		<p>{% trans "No customers found" %}</p>
	{% endfor %}
{% endif %}

{% endblock content %}
